# dstack compose file for TDX oracle deployment.
#
# The SHA256 of this file becomes the compose-hash, extended into RTMR[3].
# Any change to this file (including image digest) produces a different RTMR[3],
# which must be registered on-chain via setRtmr3().
#
# bots.json is runtime-mounted (NOT part of measurement).
# config.yaml is baked into the image (IS part of measurement).

services:
  oracle:
    image: lumio1/jjskin-oracle@sha256:6d53bdd35eaf3e25a8b45ad1111f2291a536947a586961c2ea5be745506bc296
    ports:
      - "7047:7047"
    volumes:
      - /var/run/dstack.sock:/var/run/dstack.sock:ro
      - /var/run/tappd.sock:/var/run/tappd.sock:ro
    environment:
      - RUST_LOG=info
